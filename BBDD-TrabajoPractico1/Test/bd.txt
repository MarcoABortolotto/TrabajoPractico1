CREATE DATAbase bd2;
use bd2;

CREATE TABLE a (id INT NOT NULL AUTO_INCREMENT PRIMARY key, nombre VARCHAR (50));
CREATE TABLE b (id INT NOT NULL AUTO_INCREMENT PRIMARY key, nombre VARCHAR (50));

INSERT INTO a (nombre) VALUES ('Jose');
INSERT INTO a (nombre) VALUES ('Pedro');

INSERT INTO b (nombre) VALUES ('Laura');
INSERT INTO b (nombre) VALUES ('Mariela');

CREATE USER usr1 identified BY '123456';
CREATE USER usr2 identified BY '654321';

GRANT SELECT on bd2.* TO usr1;
--select insert alter update delete execute--
-------DEATHLOCK---------

start TRANSACTION 1;(paso 0)

UPDATE a SET nombre='Carlos' WHERE id=1;(paso1)
UPDATE b SET nombre='Pepe' WHERE id=1;(paso4)

START TRANSACTION 2;(paso2)

UPDATE b SET nombre='Mario' WHERE id=1;(paso3)
UPDATE a SET nombre='Luigi' WHERE id =1;(paso5)

COMMIT;

ROLLBACK;

set transaction isolation level read committed/uncommitted/repeatable/serializable/snapshot

{
  "query": {
    "match_all": {}
  }
}

{
  "size": 5,
  "from": 5,
  "query": {
    "bool": {
      "must": {
        "match": {
          "city": "Buenos Aires"
        }
      }
    }
  },
  "sort": {
    "id": "desc"
  }
}

-----

{
  "_source": {
    "includes": [
      "star_rating"
    ]
  },
  "size": 100,
  "from": 0,
  "query": {
    "bool": {
      "must": {
        "range": {
          "star_rating": {
            "gte": 3,
            "lte": 7
          }
        }
      }
    }
  },
  "sort": {
    "id": "desc"
  }
}

agregacion-- ordernar por un nombre inventado 

"aggs" : {
"customer" :{
"terms": {
"field": "customerName.keyword"
}